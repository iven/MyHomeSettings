set -g default-terminal "screen-256color"

# Change prefix key to Ctrl+a
unbind C-b
set -g prefix C-s

# Title
set -g set-titles on
set -g set-titles-string '#S:#I.#P #T'

# Keybindings
bind -n F2 new-window -c "#{pane_current_path}"
bind -n F3 prev
bind -n F4 next
bind -n F6 detach
bind -n F7 copy-mode -u
# bind -n F8 command-prompt -I "rename-window "

bind C-v split-window -h -c "#{pane_current_path}"
bind C-h split-window -v -c "#{pane_current_path}"

# Smart pane switching with awareness of vim splits
is_vim="ps -o state= -o comm= -t '#{pane_tty}' | grep -iqE '^[^TXZ ]+ +(\\S+\\/)?g?(view|n?vim?x?)(diff)?$'"

bind-key -n 'C-h' if-shell "$is_vim" 'send-keys C-h' { if -F '#{pane_at_left}' '' 'select-pane -L' }
bind-key -n 'C-j' if-shell "$is_vim" 'send-keys C-j' { if -F '#{pane_at_bottom}' '' 'select-pane -D' }
bind-key -n 'C-k' if-shell "$is_vim" 'send-keys C-k' { if -F '#{pane_at_top}' '' 'select-pane -U' }
bind-key -n 'C-l' if-shell "$is_vim" 'send-keys C-l' { if -F '#{pane_at_right}' '' 'select-pane -R' }

bind-key -T copy-mode-vi 'C-h' if -F '#{pane_at_left}' '' 'select-pane -L'
bind-key -T copy-mode-vi 'C-j' if -F '#{pane_at_bottom}' '' 'select-pane -D'
bind-key -T copy-mode-vi 'C-k' if -F '#{pane_at_top}' '' 'select-pane -U'
bind-key -T copy-mode-vi 'C-l' if -F '#{pane_at_right}' '' 'select-pane -R'

# bind -n C-\ if-shell "$is_vim" "send-keys C-\\" "select-pane -l"
bind C-l send-keys 'C-l'

# 按 F7 时使用 Vim 键位
setw -g mode-keys vi
set -g status-keys vi

# Scroll
#set -g terminal-overrides 'xterm*:smcup@:rmcup@'

# Colors
set -ga terminal-overrides ",xterm-256color:Tc"
set -g pane-border-style fg=colour240
set -g pane-active-border-style fg=colour244
set -g status-style bg=default
set -g message-style fg=yellow,bg=default

# Other
set -g history-limit 10000
set -g focus-events on
# setw -g base-index 1
setw -g aggressive-resize on
setw -g mouse off

# 远程连接的时候不能设置这个
set -s escape-time 0

# Fix clipboard
set -g default-shell $SHELL
# set -g default-command "tdc"

# Powerline
source "$HOME/.tmuxline.conf"
